<div class="book-list-page">
  <div class="page-header">
    <div class="page-title-group">
      <h1 class="page-title">My Library</h1>
      <p class="page-subtitle">Manage your book collection</p>
    </div>
    <button mat-raised-button color="primary" (click)="addBook()" aria-label="Add new book" class="add-btn">
      <mat-icon>add</mat-icon> Add Book
    </button>
  </div>

  <mat-progress-bar mode="indeterminate" *ngIf="isLoading" aria-label="Loading books" class="loading-bar">
  </mat-progress-bar>

  <div *ngIf="errorMessage" class="error-banner" role="alert">
    <mat-icon>error_outline</mat-icon>
    <span>{{ errorMessage }}</span>
  </div>

  <div *ngIf="!isLoading && !errorMessage" class="table-wrapper">
    <table mat-table [dataSource]="books" aria-label="Books list">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let book">
          <span class="cell-title">{{ book.title }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="author">
        <th mat-header-cell *matHeaderCellDef>Author</th>
        <td mat-cell *matCellDef="let book">
          <span class="cell-author">{{ book.author }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="isbn">
        <th mat-header-cell *matHeaderCellDef>ISBN</th>
        <td mat-cell *matCellDef="let book">
          <code class="cell-isbn">{{ book.isbn }}</code>
        </td>
      </ng-container>

      <ng-container matColumnDef="publicationDate">
        <th mat-header-cell *matHeaderCellDef>Published</th>
        <td mat-cell *matCellDef="let book">
          <span class="cell-date">{{ formatDate(book.publicationDate) }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let book">
          <div class="action-buttons">
            <button mat-icon-button [routerLink]="['/books/details', book.id]" matTooltip="View Details"
              aria-label="View book details" class="action-view">
              <mat-icon>visibility</mat-icon>
            </button>
            <button mat-icon-button [routerLink]="['/books/edit', book.id]" matTooltip="Edit" aria-label="Edit book"
              class="action-edit">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button (click)="deleteBook(book.id)" matTooltip="Delete" aria-label="Delete book"
              class="action-delete">
              <mat-icon>delete_outline</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns" [attr.aria-label]="'Book: ' + row.title"></tr>
    </table>

    <div *ngIf="books.length === 0" class="empty-state">
      <div class="empty-icon"><mat-icon>menu_book</mat-icon></div>
      <h3 class="empty-title">No books yet</h3>
      <p class="empty-text">Start building your library by adding your first book.</p>
      <button mat-raised-button color="primary" (click)="addBook()" class="add-btn">
        <mat-icon>add</mat-icon> Add Your First Book
      </button>
    </div>
  </div>
</div>